<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="areaLastCheck" >
  <resultMap id="BaseResultMap" type="java.util.HashMap" ></resultMap>
  <parameterMap id="BaseParameterMap" type="java.util.HashMap" ></parameterMap>
  <!--变更报告  -->
  <select id="findAltersListByPk" resultMap="BaseResultMap" parameterMap="BaseParameterMap">
		select *
		from SC_EXPLORE_ALTER
		where FK_EXPLORE=#{EXPLORE_PK}
  </select>
  
  <!--延期或终止报告  -->
  <select id="findDelayListByPk" resultMap="BaseResultMap" parameterMap="BaseParameterMap">
		select *
		from SC_EXPLORE_DELAY
		where FK_EXPLORE=#{EXPLORE_PK}
  </select>
  
  <!--专家鉴定组成员 -->
  <select id="findExpertMemberList" resultMap="BaseResultMap" parameterMap="BaseParameterMap">
  	select * 
  	from SC_EXPLORE_ACHIEVE_EXPERT
  	where 
  		FK_EXPLORE=#{EXPLORE_PK}
  </select>
  
 <!-- 结题报告区级复审 -->
	 <update id="areaLastCheckAchieve" parameterMap="BaseParameterMap">
  		update SC_EXPLORE_ACHIEVE
			set 
				USER_WORK=#{USER_WORK}
		  		<if test="EXPERT_RESULT_OPINION != null and EXPERT_RESULT_OPINION !='' ">
		  			,
		  			EXPERT_RESULT_OPINION=#{EXPERT_RESULT_OPINION}
		  		</if>
		where EXPLORE_ACHIEVE_PK=#{EXPLORE_ACHIEVE_PK}	 
  	</update>
  	
  	<!--结题报告区级复审专家对项目成果鉴定  -->
  	<insert id="insertExpert" parameterMap="BaseParameterMap">
  		insert into 
  			SC_EXPLORE_ACHIEVE_EXPERT
  			(
  				ACHIEVE_EXPERT_PK,
				EXPERT_NAME,
				EXPERT_ROLE,
				EXPERT_UNIT,
				EXPERT_JOB,
				EXPERT_SKILL,
				FK_EXPLORE	
  			)
  		values(
  				#{UUID},
  				#{EXPERT_NAME},
  				#{EXPERT_ROLE},
  				#{EXPERT_UNIT},
  				#{EXPERT_JOB},
  				#{EXPERT_SKILL},
  				#{SC_EXPLORE_PK}
  		)
  	</insert>

  	<!--申请书报告专家评审 -->
  	<insert id="insertExploreExpert" parameterMap="BaseParameterMap">
  		insert into 
  			SC_EXPLORE_EXPERT
  			(
  				EXPLORE_EXPERT_PK,
				FK_EXPLORE,
				FK_EXPERT_TEACHER,
				EXPERT_LEVEL,
				EXPERT_TEACHER_NAME
  			)
  		values(
  				#{UUID},
  				#{SC_EXPLORE_PK},
  				#{FK_EXPERT_TEACHER},
  				#{EXPERT_LEVEL},
  				#{EXPERT_TEACHER_NAME}	
  		)
  	</insert>
  	
</mapper>