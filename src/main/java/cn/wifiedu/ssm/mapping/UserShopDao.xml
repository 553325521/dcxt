<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="userShopDao">
	<resultMap id="BaseResultMap" type="java.util.HashMap"></resultMap>
	<parameterMap id="BaseParameterMap" type="java.util.HashMap"></parameterMap>

	<!--插入user shop role对应关系 -->
	<insert id="insertUserShop" parameterMap="BaseParameterMap">
		INSERT INTO
		sc_user_shop
		(
		USER_SHOP_ID,
		FK_USER,
		FK_ROLE,
		FK_USER_TAG,
		FK_SHOP,
		INSERT_TIME
		)
		VALUES
		(
		#{UUID},
		#{USER_ID},
		#{ROLE_ID},
		<!-- 根据标签名称和appid 查询对应标签id -->
		(SELECT USER_TAG_ID FROM sc_user_tag WHERE USER_TAG_NAME = #{tagName} AND FK_APP = #{FK_APP}),
		#{SHOP_ID},
		NOW()
		)
	</insert>

</mapper>