<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="userShopDao">
	<resultMap id="BaseResultMap" type="java.util.HashMap"></resultMap>
	<parameterMap id="BaseParameterMap" type="java.util.HashMap"></parameterMap>

	<!--插入user shop role对应关系 -->
	<insert id="insertUserShop" parameterMap="BaseParameterMap">
		INSERT INTO sc_user_shop 
		(
			USER_SHOP_ID, 
			FK_USER, 
			FK_ROLE, 
			FK_USER_TAG, 
			FK_SHOP, 
			INSERT_TIME
		) 
		VALUES 
		(
			#{UUID},
			#{USER_ID},
			(SELECT ROLE_PK FROM sc_sys_role WHERE ROLE_NAME = "代理商"),
			(SELECT USER_TAG_ID FROM sc_user_tag WHERE USER_TAG_NAME = "代理端"),
			#{SHOP_ID},
			NOW()
		)
	</insert>

</mapper>