<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="shoppingCart" >
  <resultMap id="BaseResultMap" type="java.util.HashMap" ></resultMap>
  <parameterMap id="BaseParameterMap" type="java.util.HashMap" ></parameterMap>	
 	<!--添加商品类别表 -->
	<insert id="insertShoppingCart" parameterMap="BaseParameterMap">
		insert into
		SC_SHOPPING_CART
		(
		CART_PK,
		FK_USER,
		FK_SHOP,
		FK_GOODS,
		GOODS_NUMBER,
		GOODS_FORMAT,
		GOODS_MAKING,
		GOODS_TASTE,
		CART_STATE,
		INSERT_TIME,
		INSERT_BY
		)
		values(
		#{UUID},
		#{FK_USER},
		#{FK_SHOP},
		#{GOODS_PK},
		#{GOODS_NUM},
		#{GOODS_SPECIFICATION},
		#{GOODS_RECIPE},
		#{GOODS_TASTE},
		'暂存',
		NOW(),
		#{INSERT_BY},
		)
	</insert>
	<!-- 查询某用户的购物车数据 -->
	<select id="selectCartDataByUser" parameterMap="BaseParameterMap">
		select 	c.CART_PK,c.FK_GOODS,c.GOODS_NUMBER,c.GOODS_FORMAT,c.GOODS_MAKING,c.GOODS_TASTE,g.GOODS_PRICE 
		from SC_SHOPPING_CART c left join SC_GOODS g
		on c.FK_GOODS = g.GOODS_PK
		where FK_USER = #{FK_USER},
		and FK_SHOP = #{FK_SHOP},
		and CART_STATE = #{CART_STATE}
	</select>
 	
</mapper>